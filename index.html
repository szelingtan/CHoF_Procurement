<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHoF Workshop Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="styles/main.css">

    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>CHoF Workshop Dashboard</h1>
            <div class="event-info">
                <div class="info-card" style="width: 100%; text-align: center; padding: 15px;">
                    <div style="font-size: 1.1em; font-weight: bold; margin-bottom: 8px;">Event Dates</div>
                    <div style="font-size: 1.1em;">1st July 2025 & 24th July 2025</div>
                </div>
            </div>
        </div>

        <div class="guest-calculator">
            <div class="guest-input">
                <label for="guestCount">Number of Guests:</label>
                <input type="number" id="guestCount" value="80" min="30" max="200">
                <button onclick="updateCalculations()" style="padding: 12px 25px; background: linear-gradient(45deg, #93c5fd, #60a5fa); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">Update Costs</button>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('lunch')">üçõ Lunch Catering</button>
            <button class="tab" onclick="showTab('teabreak')">‚òï Tea Break Catering</button>
            <button class="tab" onclick="showTab('comparison')">üìä Cost Comparison</button>
        </div>

        <div id="lunch" class="content">
            <h2 style="margin-bottom: 25px; color: #4a5568;">üçõ Lunch Catering Options</h2>
            <div class="caterer-grid" id="lunchCaterers">
                <!-- Lunch caterers will be populated by JavaScript -->
            </div>
        </div>

        <div id="teabreak" class="content hidden">
            <h2 style="margin-bottom: 25px; color: #4a5568;">‚òï Tea Break Catering Options</h2>
            <div class="caterer-grid" id="teabreakCaterers">
                <!-- Tea break caterers will be populated by JavaScript -->
            </div>
        </div>

        <div id="comparison" class="content hidden">
            <h2 style="margin-bottom: 25px; color: #4a5568;">üìä Cost Comparison & Analytics</h2>
            <div class="chart-container">
                <div class="chart-card">
                    <div class="chart-title">Lunch Catering Costs</div>
                    <canvas id="lunchChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">Tea Break Catering Costs</div>
                    <canvas id="teabreakChart"></canvas>
                </div>
            </div>
            <div class="recommendations" id="recommendations">
                <!-- Recommendations will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Catering data
        const lunchCaterers = [
            {
                name: "Neo Garden Package A",
                pricePerPerson: 19.71,
                deliveryCharge: 98.10,
                minPax: 50,
                highlights: {
                    "Main Course (choose 1)": "Sin Chow Mee Hoon, Yang Chow Fried Rice, Thai Pineapple Rice, Fried Hong Kong Mee",
                    "Vegetables (choose 1)": "Loh Han Chye, Mixed Cabbage, Braised Bean Curd, Xiao Bai Cai with Mushroom",
                    "Fish (choose 1)": "Sweet & Sour Fish, Dried Chili Fish, Breaded Fish Fillet w Mayo, Spring Onion Fish",
                    "Chicken (choose 1)": "Lemon Chicken, Honey Chicken, Sweet & Sour Chicken, Black Pepper Chicken",
                    "Finger Food (choose 1)": "Spring Roll, Fish Ball, Breaded Scallop, Samosa",
                    "Dessert (choose 1)": "Ice Jelly w Cocktail, Chin Chow w Logan, Almond Jelly w Logan",
                    "Drinks (choose 1)": "Fruit Punch, Orange, Blackcurrant"
                },
                features: ["Disposable Cutlery Included", "Multiple Main Course Options", "Comprehensive Menu"],
                note: "May exceed budget with delivery costs"
            },
            {
                name: "Elsie's Kitchen - Nostalgic Taste",
                pricePerPerson: 16.67,
                deliveryCharge: 98.10,
                minPax: 50,
                highlights: {
                    "Rice & Noodles (choose 1)": "Nasi Goreng Kampung, Thai Pineapple Fried Rice, Mamak-Indonesian Mie Goreng",
                    "Meat (choose 1)": "Sticky Lemon Chicken, Kunyit-Ginger Fried Chicken, Golden Cereal Fish",
                    "Vegetables (choose 1)": "Nonya Chap Chye, Chop Suey Mixed Vegetables, Xiao Bai Chye with Mushrooms",
                    "Finger Food (choose 1)": "Thai Fish Cake, Potato Samosa, Honey Shrimp Wanton, Seafood Money Bag",
                    "Desserts (choose 1)": "Pulut Hitam Tart, Tau Suan with You Tiao, Pandan Buttercream Choux",
                    "Drinks (choose 1)": "Fruit Punch, Barley Cordial"
                },
                features: ["Disposable Cutlery Included", "Local Nostalgic Flavors", "Authentic Asian Cuisine"],
                note: "Best value for traditional flavors"
            },
            {
                name: "Liang Food Caterer Standard Buffet A",
                pricePerPerson: 17.75,
                deliveryCharge: 58.00,
                minPax: 30,
                highlights: {
                    "Main 1 (choose 1)": "Curry Chicken, Rendang Chicken, Oven Baked Teriyaki Chicken, Thai Basil Chicken",
                    "Main 2 (choose 1)": "Sweet Sour Fish with Pineapple, Grilled Fish w/ Lemon Butter, Assam Fish, Stir Fry with Ginger",
                    "Main 3 (choose 1)": "Stir Fry Mixed Vegetables, Lontong Vegetables, Vegetarian Mixed Vegetables",
                    "Main 4 (choose 1)": "Crabbites Egg Fried Rice, Biryani Rice, Fried Bee Hoon, Laksa Linguine",
                    "Sides/Snacks (choose 1)": "Prawn Wanton, Breaded Scallop, Ngoh Hiang, Thai Fishcake",
                    "Desserts (choose 1)": "Chendol Gula Melaka, Mixed Fruit Platter, Chocolate Eclair",
                    "Drinks (choose 1)": "Tropical Fruit Punch, Iced Lemon Tea, Yuzu, Peach Muscat"
                },
                features: ["Disposable Cutlery Included", "Free Delivery >$1000", "Diverse Menu"],
                note: "Most flexible option with lowest minimum"
            }
        ];

        const teabreakCaterers = [
            {
                name: "Neo Garden High Tea B",
                pricePerPerson: 8.39,
                deliveryCharge: 98.10,
                minPax: 80,
                highlights: {
                    "Salads (choose 1)": "Potato Salad, Garden Salad, Caesar Salad, Tropical Fruits Salad",
                    "Sandwiches (choose 1)": "Egg Mayo, Tuna Mayo, Cheddar Cheese, Sardine, Veggie",
                    "Cakes/Pastry (choose 1)": "Mini Custard Puff, Swiss Roll, Butter Cake, Marble Cake",
                    "Deep Fried (choose 1)": "Fish Ball, Spring Roll, Breaded Scallop, Mini Curry Puff",
                    "Dim Sum/Kueh (choose 1)": "Steamed Yam Cake, Mini Soon Kueh, Mini Red Bean Pau",
                    "Drinks (choose 1)": "Fruit Punch, Blackcurrant, Coffee, Tea"
                },
                features: ["Disposable Cutlery Included", "Variety of Sandwiches", "Fresh Fruit Platter"],
                note: "Requires minimum 80 guests"
            },
            {
                name: "Elsie's Kitchen Classic Tea Menu",
                pricePerPerson: 8.75,
                deliveryCharge: 98.10,
                minPax: 80,
                highlights: {
                    "Noodles (choose 1)": "Seafood White Bee Hoon, Nonya Fried Mee Siam, Mamak-Indonesian Mie Goreng, Vegetarian Black Bee Hoon",
                    "Finger Food (select 6)": "Ebi Fry, Breaded Salad Roll, Thai Fish Cake, Potato Samosa, Rocky Shrimp Ball, Sambal Fishball, Sardine Puff, Seafood Gyoza, Seafood Money Bag",
                    "Dim Sum (choose 1)": "Steamed Red Bean Bun, Crystal Dumpling, Chicken Siew Mai",
                    "Desserts (choose 1)": "Almond Logan, Bubur Hitam, Cheng Teng, Tropical Fresh Fruit",
                    "Cakes (choose 1)": "Pandan Cake, Gula Melaka Butter Cake, Ondeh Cake",
                    "Drinks (choose 1)": "Fruit Punch, Barley Cordial, Pink Guava, Nestle Lemonade, Iced Lemon Tea, Kopi C, Teh C, Coffee, Tea"
                },
                features: ["Disposable Cutlery Included", "Local Specialty Items", "Hot & Cold Beverages"],
                note: "Premium pricing with extensive options"
            },
            {
                name: "Liang Food Caterer Tea Reception B",
                pricePerPerson: 9.00,
                deliveryCharge: 58.00,
                minPax: 60,
                highlights: {
                    "Dim Sum (choose 1)": "Chicken Siew Mai, Mini Har Kao, Salted Egg Custard Pau",
                    "Snacks (choose 1)": "Sotong Ball, Fish Ball, Spring Roll, Thai Fishcake",
                    "Sandwiches (choose variety)": "Egg Mayonnaise, Tuna Mayonnaise, Butter & Kaya",
                    "Pastries (choose 1)": "Chocolate √âclair, Cream Puffs, Swiss Roll",
                    "Fruits (choose 1)": "Watermelon, Honeydew",
                    "Drinks (choose 1)": "Coffee, Tea, Hot Milo, Iced Milo"
                },
                features: ["Disposable Cutlery Included", "Fresh Fruits Choose 1", "Plant-based Options"],
                note: "Simple but comprehensive tea reception (*Free delivery if food >$1000 before GST)"
            }
        ];

        let currentGuestCount = 80;
        let lunchChart, teabreakChart;

        function showTab(tabName) {
            // Hide all content
            document.querySelectorAll('.content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected content and activate tab
            document.getElementById(tabName).classList.remove('hidden');
            event.target.classList.add('active');
            
            if (tabName === 'comparison') {
                setTimeout(updateCharts, 100);
            }
        }

        function calculateTotalCost(caterer, guestCount) {
            if (guestCount < caterer.minPax) {
                guestCount = caterer.minPax;
            }
            const foodCost = caterer.pricePerPerson * guestCount;
            
            // Special rule for Liang Food Tea Reception B: waive delivery if food > $1000 before GST
            let deliveryCharge = caterer.deliveryCharge;
            if (caterer.name === "Liang Food Caterer Tea Reception B") {
                // Assuming price includes GST (7%), so food before GST = foodCost / 1.07
                const foodCostBeforeGST = foodCost / 1.07;
                if (foodCostBeforeGST > 1000) {
                    deliveryCharge = 0;
                }
            }
            
            const totalCost = foodCost + deliveryCharge;
            return { foodCost, totalCost, adjustedGuestCount: guestCount, deliveryCharge };
        }

        function renderCaterers(caterers, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            caterers.forEach(caterer => {
                const costs = calculateTotalCost(caterer, currentGuestCount);
                const isMinimumAdjusted = costs.adjustedGuestCount > currentGuestCount;
                
                const card = document.createElement('div');
                card.className = 'caterer-card';
                
                card.innerHTML = `
                    <div class="caterer-name">
                        ${caterer.name}
                        <span style="font-size: 0.7em; background: #e2e8f0; padding: 4px 8px; border-radius: 10px; color: #4a5568;">
                            Min ${caterer.minPax} pax
                        </span>
                    </div>
                    
                    <div class="price-badge">$${caterer.pricePerPerson.toFixed(2)} per person</div>
                    
                    ${isMinimumAdjusted ? `
                        <div class="warning">
                            ‚ö†Ô∏è Using minimum ${caterer.minPax} guests (you entered ${currentGuestCount})
                        </div>
                    ` : ''}
                    
                    <div class="menu-highlights">
                        ${Object.entries(caterer.highlights).map(([category, items]) => `
                            <div class="menu-category">
                                <strong>${category}:</strong>
                                <div class="menu-items">${items}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <ul class="features-list">
                        ${caterer.features.map(feature => `<li>${feature}</li>`).join('')}
                    </ul>
                    
                    <div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #e2e8f0;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Food Cost (${costs.adjustedGuestCount} pax):</span>
                            <strong>$${costs.foodCost.toFixed(2)}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Delivery Charge:</span>
                            <strong>$${caterer.deliveryCharge.toFixed(2)}</strong>
                        </div>
                    </div>
                    
                    <div class="total-cost">
                        Total Cost: $${costs.totalCost.toFixed(2)}
                    </div>
                    
                    ${caterer.note ? `
                        <div class="budget-alert">
                            üí° <strong>Note:</strong> ${caterer.note}
                        </div>
                    ` : ''}
                `;
                
                container.appendChild(card);
            });
        }

        function updateCalculations() {
            currentGuestCount = parseInt(document.getElementById('guestCount').value) || 80;
            renderCaterers(lunchCaterers, 'lunchCaterers');
            renderCaterers(teabreakCaterers, 'teabreakCaterers');
            updateRecommendations();
            if (lunchChart && teabreakChart) {
                updateCharts();
            }
        }

        function updateCharts() {
            const lunchData = lunchCaterers.map(caterer => {
                const costs = calculateTotalCost(caterer, currentGuestCount);
                return {
                    name: caterer.name.split(' ')[0] + ' ' + caterer.name.split(' ')[1],
                    cost: costs.totalCost
                };
            });
            
            const teabreakData = teabreakCaterers.map(caterer => {
                const costs = calculateTotalCost(caterer, currentGuestCount);
                return {
                    name: caterer.name.split(' ')[0] + ' ' + caterer.name.split(' ')[1],
                    cost: costs.totalCost
                };
            });

            // Destroy existing charts
            if (lunchChart) lunchChart.destroy();
            if (teabreakChart) teabreakChart.destroy();

            // Create new charts
            const lunchCtx = document.getElementById('lunchChart').getContext('2d');
            lunchChart = new Chart(lunchCtx, {
                type: 'bar',
                data: {
                    labels: lunchData.map(d => d.name),
                    datasets: [{
                        label: 'Total Cost ($)',
                        data: lunchData.map(d => d.cost),
                        backgroundColor: [
                            'rgba(147, 197, 253, 0.8)',
                            'rgba(167, 243, 208, 0.8)',
                            'rgba(253, 186, 116, 0.8)'
                        ],
                        borderColor: [
                            'rgba(147, 197, 253, 1)',
                            'rgba(167, 243, 208, 1)',
                            'rgba(253, 186, 116, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toFixed(0);
                                }
                            }
                        }
                    }
                }
            });

            const teabreakCtx = document.getElementById('teabreakChart').getContext('2d');
            teabreakChart = new Chart(teabreakCtx, {
                type: 'bar',
                data: {
                    labels: teabreakData.map(d => d.name),
                    datasets: [{
                        label: 'Total Cost ($)',
                        data: teabreakData.map(d => d.cost),
                        backgroundColor: [
                            'rgba(147, 197, 253, 0.8)',
                            'rgba(252, 165, 165, 0.8)',
                            'rgba(153, 246, 228, 0.8)'
                        ],
                        borderColor: [
                            'rgba(147, 197, 253, 1)',
                            'rgba(252, 165, 165, 1)',
                            'rgba(153, 246, 228, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toFixed(0);
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateRecommendations() {
            // Calculate best options
            const lunchCosts = lunchCaterers.map(caterer => ({
                ...caterer,
                ...calculateTotalCost(caterer, currentGuestCount)
            }));
            
            const teabreakCosts = teabreakCaterers.map(caterer => ({
                ...caterer,
                ...calculateTotalCost(caterer, currentGuestCount)
            }));

            const bestLunch = lunchCosts.reduce((best, current) => 
                current.totalCost < best.totalCost ? current : best
            );

            const bestTeabreak = teabreakCosts.reduce((best, current) => 
                current.totalCost < best.totalCost ? current : best
            );

            const totalBestCost = bestLunch.totalCost + bestTeabreak.totalCost;

            const recommendationsHtml = `
                <h3>üí° Smart Recommendations for ${currentGuestCount} Guests</h3>
                
                <div class="recommendation-item">
                    <strong>üèÜ Best Value Combo:</strong><br>
                    Lunch: <strong>${bestLunch.name}</strong> - $${bestLunch.totalCost.toFixed(2)}<br>
                    Tea Break: <strong>${bestTeabreak.name}</strong> - $${bestTeabreak.totalCost.toFixed(2)}<br>
                    <div style="background: linear-gradient(45deg, #48bb78, #38a169); color: white; padding: 10px; border-radius: 8px; margin-top: 10px; text-align: center; font-weight: bold;">
                        Total Combined Cost: $${totalBestCost.toFixed(2)}
                    </div>
                </div>

                <div class="recommendation-item">
                    <strong>üìä Cost Analysis:</strong><br>
                    ‚Ä¢ Most affordable lunch: ${bestLunch.name} ($${bestLunch.totalCost.toFixed(2)})<br>
                    ‚Ä¢ Most affordable tea break: ${bestTeabreak.name} ($${bestTeabreak.totalCost.toFixed(2)})<br>
                    ‚Ä¢ Average cost per person (combined): $${(totalBestCost / currentGuestCount).toFixed(2)}
                </div>

                <div class="recommendation-item">
                    <strong>‚ö†Ô∏è Important Considerations:</strong><br>
                    ‚Ä¢ Check minimum guest requirements for each caterer<br>
                    ‚Ä¢ Neo Garden options may exceed budget due to high delivery charges<br>
                    ‚Ä¢ Liang Food offers the most flexibility with lowest minimums<br>
                    ‚Ä¢ Consider dietary restrictions and menu variety for your audience
                </div>

                <div class="recommendation-item">
                    <strong>üéØ Best for Different Scenarios:</strong><br>
                    ‚Ä¢ <strong>Budget-conscious:</strong> Liang Food (both lunch & tea) - Lower delivery charges<br>
                    ‚Ä¢ <strong>Premium experience:</strong> Elsie's Kitchen - Authentic local flavors<br>
                    ‚Ä¢ <strong>Large groups (80+):</strong> Neo Garden - Comprehensive menu options<br>
                    ‚Ä¢ <strong>Small groups (30-50):</strong> Liang Food - Lowest minimum requirements
                </div>
            `;

            document.getElementById('recommendations').innerHTML = recommendationsHtml;
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            updateCalculations();
        });
    </script>
</body>
</html>